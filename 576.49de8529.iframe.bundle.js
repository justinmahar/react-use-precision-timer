"use strict";(self.webpackChunkreact_use_precision_timer=self.webpackChunkreact_use_precision_timer||[]).push([[576],{"./src/components/UseTimerExample.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>UseTimerExample});__webpack_require__("./node_modules/bootstrap/dist/css/bootstrap.css");var react=__webpack_require__("./node_modules/react/index.js"),Card=__webpack_require__("./node_modules/react-bootstrap/esm/Card.js"),Form=__webpack_require__("./node_modules/react-bootstrap/esm/Form.js"),Button=__webpack_require__("./node_modules/react-bootstrap/esm/Button.js"),Table=__webpack_require__("./node_modules/react-bootstrap/esm/Table.js"),ProgressBar=__webpack_require__("./node_modules/react-bootstrap/esm/ProgressBar.js"),Badge=__webpack_require__("./node_modules/react-bootstrap/esm/Badge.js"),useTimer=__webpack_require__("./src/hooks/useTimer.tsx"),dist=__webpack_require__("./node_modules/react-sub-unsub/dist/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const TimerRenderer=_ref=>{let{timer,render=timer=>(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:timer.getElapsedRunningTime()}),renderRate=10}=_ref;const[,setRenderTime]=react.useState(Date.now());return react.useEffect((()=>{const subs=new dist.us;return subs.setInterval((()=>setRenderTime((new Date).getTime())),renderRate),subs.createCleanup()}),[renderRate]),render(timer)};try{TimerRenderer.displayName="TimerRenderer",TimerRenderer.__docgenInfo={description:"Renders a timer or stopwatch at regular intervals.",displayName:"TimerRenderer",props:{timer:{defaultValue:null,description:"The timer or stopwatch to render.",name:"timer",required:!0,type:{name:"Timer"}},render:{defaultValue:{value:"(timer) => <>{timer.getElapsedRunningTime()}</>"},description:"Renders the timer, returning a JSX element.\n@param timer The timer to render.",name:"render",required:!1,type:{name:"((timer: Timer) => Element)"}},renderRate:{defaultValue:{value:"10"},description:"Render rate in milliseconds.",name:"renderRate",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/TimerRenderer.tsx#TimerRenderer"]={docgenInfo:TimerRenderer.__docgenInfo,name:"TimerRenderer",path:"src/components/TimerRenderer.tsx#TimerRenderer"})}catch(__react_docgen_typescript_loader_error){}function UseTimerExample(_ref){let{initialDelay=1e3}=_ref;const[delay,setDelay]=react.useState(initialDelay),[speedMultiplier,setSpeedMultiplier]=react.useState(1),[startTimeEnabled,setStartTimeEnabled]=react.useState(!1),[startTime,setStartTime]=react.useState(Date.now()),[callbackTime,setCallbackTime]=react.useState(-1),[overdueCallCount,setOverdueCallCount]=react.useState(0),[runOnce,setRunOnce]=react.useState(!1),[fireOnStart,setFireOnStart]=react.useState(!1),[startImmediately,setStartImmediately]=react.useState(!0),[delayChanged,setDelayChanged]=react.useState(!1),[renderRate,setRenderRate]=react.useState(10),callback=react.useCallback((overdueCount=>{setCallbackTime((new Date).getTime()),setOverdueCallCount(overdueCount)}),[]),timer=(0,useTimer.u)({delay:isNaN(delay)?0:delay,runOnce,fireOnStart,startImmediately,speedMultiplier},callback),effectiveDelay=react.useMemo((()=>timer.getEffectiveDelay()),[timer]);return react.useEffect((()=>{delayChanged&&(setDelayChanged(!1),startImmediately?timer.start(startTimeEnabled?startTime:void 0):timer.stop())}),[delay,delayChanged,startImmediately,startTime,startTimeEnabled,timer]),(0,jsx_runtime.jsx)("div",{className:"d-flex",children:(0,jsx_runtime.jsx)(Card.c,{children:(0,jsx_runtime.jsxs)(Card.c.Body,{className:"d-flex flex-column align-items-center gap-2",children:[(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-wrap justify-content-center gap-2",children:[(0,jsx_runtime.jsxs)(Card.c,{style:{minWidth:300,maxWidth:600},children:[(0,jsx_runtime.jsx)(Card.c.Header,{children:"Timer Options"}),(0,jsx_runtime.jsxs)(Card.c.Body,{children:[(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:["Delay:"," ",(0,jsx_runtime.jsx)(Form.c.Range,{min:"0",max:"5000",value:isNaN(delay)?0:delay,onChange:e=>{const newDelay=parseInt(e.target.value);setDelay(newDelay),setDelayChanged(!0),0===newDelay&&(setCallbackTime(-1),setOverdueCallCount(0))}})," ",(0,jsx_runtime.jsx)(Form.c.Control,{type:"number",min:0,value:delay,onChange:e=>{const newDelay=parseInt(e.target.value);setDelay(newDelay),setDelayChanged(!0),0===newDelay&&(setCallbackTime(-1),setOverdueCallCount(0))},style:{width:80}}),"ms"]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-wrap align-items-start gap-1 mb-3",children:[(0,jsx_runtime.jsx)(Form.c.Check,{inline:!0,label:"Use start time:",id:"start-time-checkbox",name:"startTimeEnabled",checked:startTimeEnabled,onChange:e=>{setStartTimeEnabled(e.target.checked)}}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)(Form.c.Control,{type:"number",min:"0",value:startTime,onChange:e=>{const newVal=parseInt(e.target.value);setStartTime(newVal)},style:{width:180}}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Form.c.Text,{className:"text-muted",children:"(Unix timestamp in millis)"})})]})]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-wrap justify-content-center gap-1 mb-3",children:[(0,jsx_runtime.jsx)(Form.c.Check,{inline:!0,label:"runOnce",id:"runOnce",name:"runOnce",checked:runOnce,onChange:e=>setRunOnce(e.target.checked)}),(0,jsx_runtime.jsx)(Form.c.Check,{inline:!0,label:"fireOnStart",id:"fireOnStart",name:"fireOnStart",checked:fireOnStart,onChange:e=>setFireOnStart(e.target.checked)}),(0,jsx_runtime.jsx)(Form.c.Check,{inline:!0,label:"startImmediately",id:"startImmediately",name:"startImmediately",checked:startImmediately,onChange:e=>setStartImmediately(e.target.checked)})]}),(0,jsx_runtime.jsxs)("div",{className:"d-flex flex-column",children:[(0,jsx_runtime.jsx)("div",{children:"Speed multiplier:"}),(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,jsx_runtime.jsx)(Form.c.Range,{min:0,max:5,step:.25,value:isNaN(speedMultiplier)?1:speedMultiplier,onChange:e=>{const newSpeed=parseFloat(e.target.value);setSpeedMultiplier(newSpeed),setDelayChanged(!0)}})," ",(0,jsx_runtime.jsxs)("div",{className:"d-flex align-items-center gap-1",children:["Ã—",(0,jsx_runtime.jsx)(Form.c.Control,{type:"number",min:0,step:.25,value:isNaN(speedMultiplier)?1:speedMultiplier,onChange:e=>{const newSpeed=parseFloat(e.target.value);setSpeedMultiplier(newSpeed),setDelayChanged(!0)},style:{width:80}})]})]}),1!==speedMultiplier&&(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)(Form.c.Text,{className:"text-muted",children:["Effective delay: ",effectiveDelay," ms"]})})]})]})]}),(0,jsx_runtime.jsx)(Card.c,{children:(0,jsx_runtime.jsxs)(Card.c.Body,{className:"d-flex flex-column justify-content-center align-items-center",children:[(0,jsx_runtime.jsxs)("div",{className:"text-center",children:["Render every:",(0,jsx_runtime.jsx)("br",{}),renderRate," ms"]}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Form.c.Range,{min:"1",max:"5000",value:renderRate,onChange:e=>{setRenderRate(parseInt(e.target.value))}})})]})})]}),(0,jsx_runtime.jsx)(Card.c,{style:{minWidth:300,maxWidth:600},children:(0,jsx_runtime.jsx)(Card.c.Body,{children:(0,jsx_runtime.jsxs)("div",{className:"d-flex gap-1 justify-content-center",children:[(0,jsx_runtime.jsx)(Button.c,{variant:timer.isStopped()?"primary":"outline-dark",onClick:()=>{timer.start(startTimeEnabled?startTime:void 0)},children:"Start"}),(0,jsx_runtime.jsx)(Button.c,{variant:timer.isStarted()?"primary":"outline-dark",onClick:()=>{timer.stop()},children:"Stop"}),(0,jsx_runtime.jsx)(Button.c,{variant:timer.isRunning()?"primary":"outline-dark",onClick:()=>{timer.pause()},children:"Pause"}),(0,jsx_runtime.jsx)(Button.c,{variant:timer.isPaused()?"primary":"outline-dark",onClick:()=>{timer.resume()},children:"Resume"})]})})}),(0,jsx_runtime.jsx)("div",{className:"d-flex justify-content-center",style:{minWidth:300,maxWidth:600},children:(0,jsx_runtime.jsx)(Table.c,{striped:!0,bordered:!0,responsive:!0,className:"w-100",children:(0,jsx_runtime.jsxs)("tbody",{children:[(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"Callback time:"}),(0,jsx_runtime.jsxs)("td",{style:{minWidth:200},children:[(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)("style",{children:".progress-bar {\n                            -webkit-transition: none !important;\n                            -moz-transition: none !important;\n                            -ms-transition: none !important;\n                            -o-transition: none !important;\n                            transition: none !important;\n                          }"}),effectiveDelay>0&&(0,jsx_runtime.jsx)(ProgressBar.c,{variant:"primary",now:t.isStopped()?0:effectiveDelay-t.getRemainingTime(),max:effectiveDelay,label:effectiveDelay-t.getRemainingTime()+" ms",style:{transition:"none"}}),(isNaN(effectiveDelay)||0===effectiveDelay)&&(0,jsx_runtime.jsx)(Badge.c,{className:"fw-bold m-0",children:"Stopwatch"})]})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:callbackTime})})]})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"isStarted():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:t.isStarted()?"success":"danger",className:"font-monospace",children:t.isStarted()+""})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"isStopped():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:t.isStopped()?"success":"danger",className:"font-monospace",children:t.isStopped()+""})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"isPaused():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:t.isPaused()?"success":"danger",className:"font-monospace",children:t.isPaused()+""})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"isRunning():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:t.isRunning()?"success":"danger",className:"font-monospace",children:t.isRunning()+""})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getEffectiveDelay():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getEffectiveDelay()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getStartTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:t.getStartTime()})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getLastFireTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:t.getLastFireTime()})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getNextFireTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:t.getNextFireTime()})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getPauseTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:t.getPauseTime()})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getResumeTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:t.getResumeTime()})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getRemainingTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getRemainingTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getElapsedStartedTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getElapsedStartedTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getElapsedRunningTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getElapsedRunningTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getTotalElapsedPausedTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getTotalElapsedPausedTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getPeriodElapsedPausedTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getPeriodElapsedPausedTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"getElapsedResumedTime():"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsxs)(Badge.c,{pill:!0,bg:"primary",children:[t.getElapsedResumedTime()," ms"]})})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"Overdue call count (for delays under 10ms):"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(Badge.c,{pill:!0,bg:"dark",children:overdueCallCount})})]}),(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("td",{className:"text-break",children:"Render time:"}),(0,jsx_runtime.jsx)("td",{className:"text-break",children:(0,jsx_runtime.jsx)(TimerRenderer,{timer,renderRate,render:t=>(0,jsx_runtime.jsx)(Badge.c,{bg:"warning",className:"text-black",children:Date.now()})})})]})]})})})]})})})}UseTimerExample.displayName="UseTimerExample";try{UseTimerExample.displayName="UseTimerExample",UseTimerExample.__docgenInfo={description:"",displayName:"UseTimerExample",props:{initialDelay:{defaultValue:{value:"1000"},description:"",name:"initialDelay",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/UseTimerExample.tsx#UseTimerExample"]={docgenInfo:UseTimerExample.__docgenInfo,name:"UseTimerExample",path:"src/components/UseTimerExample.tsx#UseTimerExample"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/useTimer.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>useTimer});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_sub_unsub__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-sub-unsub/dist/index.js");const never=Number.MAX_SAFE_INTEGER,useTimer=function(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},callback=arguments.length>1?arguments[1]:void 0;const[firstRun,setFirstRun]=react__WEBPACK_IMPORTED_MODULE_0__.useState(!0),[renderTime,setRenderTime]=react__WEBPACK_IMPORTED_MODULE_0__.useState(Date.now()),startedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(!1),startTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(never),lastFireTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(never),nextFireTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(never),pauseTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(never),resumeTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(never),periodElapsedPauseTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(0),totalElapsedPauseTimeRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(0),delay=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>{const s=options.speedMultiplier??1,d=options.delay??0;return 0===s?0:s>0&&d>0?Math.max(1,Math.round(d*(1/s))):d}),[options.delay,options.speedMultiplier]),runOnce=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>options.runOnce),[options.runOnce]),fireOnStart=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>options.fireOnStart),[options.fireOnStart]),startImmediately=react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>options.startImmediately),[options.startImmediately]),isStarted=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>startedRef.current),[]),isStopped=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>!isStarted()),[isStarted]),isPaused=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()&&pauseTimeRef.current!==never),[isStarted]),isRunning=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()&&!isPaused()),[isPaused,isStarted]),getEffectiveDelay=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>delay),[delay]),getStartTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()?startTimeRef.current:-1),[isStarted]),getLastFireTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>lastFireTimeRef.current<never&&delay?lastFireTimeRef.current:-1),[delay]),getNextFireTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isRunning()&&delay?nextFireTimeRef.current:-1),[isRunning,delay]),getPauseTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isPaused()?pauseTimeRef.current:-1),[isPaused]),getResumeTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()&&resumeTimeRef.current<never?resumeTimeRef.current:-1),[isStarted]),getElapsedStartedTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()?Date.now()-startTimeRef.current:0),[isStarted]),getElapsedRunningTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isStarted()?isPaused()?pauseTimeRef.current-startTimeRef.current-totalElapsedPauseTimeRef.current:Date.now()-startTimeRef.current-totalElapsedPauseTimeRef.current:0),[isPaused,isStarted]),getPeriodElapsedPausedTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{let additionalElapsedPauseTime=0;return isPaused()&&(additionalElapsedPauseTime=Date.now()-pauseTimeRef.current),periodElapsedPauseTimeRef.current+additionalElapsedPauseTime}),[isPaused]),getTotalElapsedPausedTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{let additionalElapsedPauseTime=0;return isPaused()&&(additionalElapsedPauseTime=Date.now()-pauseTimeRef.current),totalElapsedPauseTimeRef.current+additionalElapsedPauseTime}),[isPaused]),getElapsedResumedTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>isRunning()?Date.now()-resumeTimeRef.current:0),[isRunning]),getRemainingTime=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{const currentTime=Date.now();if(isStarted()&&delay){if(isRunning())return Math.max(0,nextFireTimeRef.current-currentTime);if(isPaused()){const edgeTime=lastFireTimeRef.current!==never?lastFireTimeRef.current:startTimeRef.current;return Math.max(0,delay-(pauseTimeRef.current-edgeTime-periodElapsedPauseTimeRef.current))}}return 0}),[isPaused,isRunning,isStarted,delay]),start=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(){let startTimeMillis=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();const newNextFireTime=delay?Math.max(startTimeMillis,fireOnStart?startTimeMillis:startTimeMillis+delay):never;startTimeRef.current=startTimeMillis,lastFireTimeRef.current=never,nextFireTimeRef.current=newNextFireTime,pauseTimeRef.current=never,resumeTimeRef.current=startTimeMillis,periodElapsedPauseTimeRef.current=0,totalElapsedPauseTimeRef.current=0,startedRef.current=!0,setRenderTime(Date.now())}),[delay,fireOnStart]),stop=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{startTimeRef.current=never,lastFireTimeRef.current=never,nextFireTimeRef.current=never,pauseTimeRef.current=never,resumeTimeRef.current=never,periodElapsedPauseTimeRef.current=0,totalElapsedPauseTimeRef.current=0,startedRef.current=!1,setRenderTime(Date.now())}),[]),pause=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{isRunning()&&(pauseTimeRef.current=Date.now(),resumeTimeRef.current=never,setRenderTime(Date.now()))}),[isRunning]),resume=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((()=>{if(isStarted()&&isPaused()){const currentTime=Date.now();nextFireTimeRef.current=currentTime+getRemainingTime(),periodElapsedPauseTimeRef.current=0,totalElapsedPauseTimeRef.current=totalElapsedPauseTimeRef.current+(currentTime-pauseTimeRef.current),pauseTimeRef.current=never,resumeTimeRef.current=currentTime,setRenderTime(Date.now())}}),[isStarted,isPaused,getRemainingTime]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{const subs=new react_sub_unsub__WEBPACK_IMPORTED_MODULE_1__.us,checkTimer=()=>{if(delay&&!isPaused()){const now=Date.now();if(now>=nextFireTimeRef.current){const overdueCalls=lastFireTimeRef.current!==never?Math.max(0,Math.floor((now-nextFireTimeRef.current)/delay)):0;lastFireTimeRef.current=now,periodElapsedPauseTimeRef.current=0;const overdueElapsedTime=overdueCalls*delay,newFireTime=Math.max(now,nextFireTimeRef.current+delay+overdueElapsedTime);if(nextFireTimeRef.current=newFireTime,"function"==typeof callback)try{callback(overdueCalls)}catch(e){console.error(e)}runOnce?stop():subs.setTimeout((()=>{checkTimer()}),Math.max(newFireTime-Date.now(),1))}else nextFireTimeRef.current<never&&subs.setTimeout((()=>{checkTimer()}),Math.max(nextFireTimeRef.current-Date.now(),1))}};return checkTimer(),subs.createCleanup()}),[callback,delay,isPaused,renderTime,runOnce,stop]),react__WEBPACK_IMPORTED_MODULE_0__.useEffect((()=>{firstRun&&(setFirstRun(!1),startImmediately&&start())}),[firstRun,startImmediately,start]),react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>({start,stop,pause,resume,isStarted,isStopped,isRunning,isPaused,getEffectiveDelay,getStartTime,getLastFireTime,getNextFireTime,getPauseTime,getResumeTime,getRemainingTime,getElapsedStartedTime,getElapsedRunningTime,getTotalElapsedPausedTime,getPeriodElapsedPausedTime,getElapsedResumedTime})),[getEffectiveDelay,getElapsedResumedTime,getElapsedRunningTime,getElapsedStartedTime,getLastFireTime,getNextFireTime,getPauseTime,getPeriodElapsedPausedTime,getRemainingTime,getResumeTime,getStartTime,getTotalElapsedPausedTime,isPaused,isRunning,isStarted,isStopped,pause,resume,start,stop])};try{useTimer.displayName="useTimer",useTimer.__docgenInfo={description:"See documentation: [useTimer](https://justinmahar.github.io/react-use-precision-timer/?path=/story/docs-usetimer--docs)\n\nA versatile precision timer hook for React. Doubles as a stopwatch.\n\n- Based on `setTimeout()` and timestamps, not `setInterval()` or ticks.\n- Features perfect mean interval accuracy, meaning it doesn't wander.\n- Resilient to expensive callback operations and low timer delays.\n- Can be used as a timer or a stopwatch.\n- Supports starting, stopping, pausing, and resuming.\n- Includes accessors for everything under the sun.",displayName:"useTimer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/hooks/useTimer.tsx#useTimer"]={docgenInfo:useTimer.__docgenInfo,name:"useTimer",path:"src/hooks/useTimer.tsx#useTimer"})}catch(__react_docgen_typescript_loader_error){}},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414z%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%230c63e4%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23212529%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27m6 10 3 3 6-6%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27m6 10 3 3 6-6%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%280, 0, 0, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},"data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e":module=>{module.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z%27/%3e%3c/svg%3e"}}]);